<template>
    <div class="sms-automation-on push-welcome-pop">
        <div class="row_head_time">
            <div class="row align-items-center">

            </div>
        </div>
        <div class="middle_div pt-4">
            <div class="row">
                <div class="col-3">
                    <div class="left_div border-radius-reg ">
                        <p class="title_p mb-0 pb-3 border-bottom">
                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9.37494 0H11.6259C11.9446 0.0553711 12.2567 0.199336 12.4679 0.450762C12.6504 0.65748 12.7554 0.924492 12.7862 1.19725C12.8486 1.72676 12.9253 2.25422 12.9819 2.78455C13.3912 2.93918 13.8001 3.09504 14.1918 3.29109C14.5228 3.04623 14.8431 2.78701 15.1696 2.53641C15.3895 2.37029 15.5958 2.1726 15.8607 2.0799C16.314 1.91215 16.8599 2.01756 17.204 2.36127C17.6174 2.76814 18.0235 3.18199 18.4357 3.5901C18.5788 3.73365 18.7318 3.87352 18.8327 4.05193C19.0452 4.42313 19.0522 4.90014 18.8586 5.28035C18.754 5.48174 18.6002 5.65072 18.4644 5.83037C18.213 6.15727 17.9546 6.47842 17.7089 6.809C17.8557 7.12318 18.0054 7.43736 18.115 7.76713C18.1482 7.84998 18.1671 7.94391 18.229 8.01117C18.7417 8.08541 19.2585 8.13791 19.772 8.20764C20.0648 8.2384 20.354 8.34832 20.571 8.55135C20.8101 8.76176 20.945 9.06486 21 9.37412V11.6251C20.936 12.0131 20.7252 12.3838 20.3827 12.5893C20.0571 12.8043 19.6543 12.7948 19.2827 12.8527C18.9324 12.9056 18.5784 12.9298 18.2294 12.9888C18.1658 13.0549 18.1486 13.1504 18.115 13.2329C18.0067 13.5635 17.8557 13.8768 17.7089 14.191C18.0534 14.6545 18.4218 15.0999 18.7655 15.5634C19.0411 15.9522 19.0755 16.4965 18.8487 16.9157C18.7482 17.1088 18.5875 17.2586 18.4357 17.4103C18.0239 17.8184 17.617 18.2314 17.2044 18.6387C16.8607 18.9829 16.314 19.0883 15.8607 18.9197C15.6052 18.8303 15.4046 18.6428 15.193 18.4816C14.8587 18.2245 14.5298 17.9603 14.1914 17.7085C13.7997 17.905 13.3908 18.0604 12.9819 18.2154C12.9277 18.7491 12.8461 19.279 12.7858 19.8118C12.7477 20.1682 12.566 20.5095 12.2788 20.7272C12.0906 20.8757 11.8588 20.9545 11.6259 21H9.37453C9.0743 20.9471 8.78063 20.8183 8.57104 20.5915C8.38729 20.3983 8.26588 20.1477 8.22568 19.8844C8.14981 19.3331 8.09402 18.779 8.01076 18.2294C7.94514 18.1646 7.84916 18.1474 7.76672 18.1133C7.43736 18.0038 7.12277 17.8557 6.80982 17.7073C6.47268 17.9616 6.14127 18.2241 5.80699 18.4825C5.63596 18.6129 5.47312 18.7585 5.27994 18.8573C4.89316 19.0563 4.40426 19.0423 4.03102 18.8184C3.87023 18.7236 3.74145 18.5866 3.61061 18.4558C3.18937 18.0296 2.76117 17.6105 2.34158 17.1827C1.92158 16.7504 1.89 16.0174 2.25135 15.5396C2.59342 15.0864 2.95148 14.6454 3.29191 14.191C3.14385 13.8772 2.99414 13.563 2.88545 13.2329C2.85182 13.1504 2.83418 13.0553 2.77061 12.9892C2.221 12.9072 1.66729 12.8498 1.11645 12.7747C0.746074 12.7198 0.403184 12.4987 0.204258 12.1808C0.0959766 12.0135 0.0389648 11.8195 0 11.6259V9.37535C0.0442969 9.13172 0.13125 8.89055 0.291211 8.69777C0.509004 8.42461 0.84082 8.25029 1.18781 8.21502C1.72102 8.1576 2.25094 8.07064 2.78496 8.01814C2.94082 7.60963 3.09381 7.19947 3.29191 6.80941C2.94656 6.34635 2.57906 5.89969 2.23412 5.43621C1.95645 5.04574 1.92445 4.49859 2.15291 4.07777C2.23043 3.93094 2.34445 3.80789 2.46176 3.69223C2.90842 3.25049 3.34975 2.80301 3.796 2.36127C4.1393 2.01633 4.68604 1.91215 5.13885 2.0799C5.38535 2.16645 5.58182 2.34404 5.78607 2.4999C6.12732 2.76322 6.46365 3.03352 6.80941 3.2915C7.19988 3.09381 7.61004 2.94164 8.01773 2.78496C8.07105 2.26529 8.15062 1.7485 8.20846 1.22883C8.23471 0.964277 8.32617 0.703418 8.49475 0.495469C8.70762 0.220254 9.03533 0.0549609 9.37494 0ZM10.151 6.13799C9.09563 6.22084 8.07844 6.704 7.34754 7.47018C6.599 8.2425 6.15234 9.29947 6.12691 10.3757C6.09984 11.2596 6.35045 12.1505 6.83772 12.8892C7.45336 13.8379 8.45086 14.5318 9.55746 14.771C10.5422 14.9941 11.6029 14.855 12.4991 14.3903C13.406 13.9256 14.1385 13.134 14.5322 12.1944C14.876 11.3794 14.9674 10.4586 14.7788 9.59355C14.5437 8.45332 13.8243 7.42506 12.8395 6.80531C12.0475 6.29754 11.0882 6.06211 10.151 6.13799Z" fill="#707070"/>
                            </svg>
                            General Settings
                        </p>
                        <a class="link_a d-block pt-3" href="#">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.64914 0.0927449C10.4837 -0.160408 12.3902 0.106809 14.0794 0.868351C15.6994 1.58822 17.1147 2.75502 18.1439 4.19736C18.9909 5.385 19.5779 6.75858 19.8358 8.1952C20.2947 10.6601 19.7837 13.2921 18.4184 15.3965C17.0261 17.5749 14.7613 19.1881 12.2323 19.7444C12.4063 19.4642 12.549 19.161 12.7647 18.9094C12.9621 18.6792 13.2403 18.5479 13.4893 18.3843C13.9794 18.0671 14.4529 17.7239 14.9066 17.3556C15.266 17.067 15.4837 16.6503 15.7937 16.3154C15.9677 16.1206 16.2156 16.0112 16.3833 15.8101C16.7276 15.4132 17.0115 14.9678 17.2761 14.5152C17.5017 14.1151 17.7163 13.7041 17.8475 13.2624C17.884 13.1244 17.9205 12.978 17.8882 12.8363C17.8257 12.6629 17.648 12.5686 17.484 12.5123C17.086 12.3858 16.6625 12.4165 16.2521 12.3722C16.1281 12.3582 15.9822 12.3259 15.9208 12.2045C15.8307 12.0014 15.8671 11.7503 15.7213 11.5716C15.5577 11.4075 15.3181 11.3669 15.104 11.3044C14.7123 11.2049 14.3341 11.0565 13.9815 10.8585C13.6205 10.6595 13.2111 10.4699 12.7881 10.547C12.2521 10.647 11.9125 11.1424 11.4047 11.307C11.0963 11.3252 10.7759 11.2955 10.4874 11.1804C10.2738 11.0914 10.0941 10.9028 10.0608 10.6679C10.0238 10.435 10.0149 10.1788 9.85865 9.98707C9.71175 9.78288 9.45704 9.71152 9.22264 9.66828C9.27473 9.47034 9.36172 9.2724 9.34505 9.06405C9.34557 8.95466 9.23201 8.86923 9.13044 8.92184C8.81374 9.06092 8.57361 9.35991 8.21888 9.41513C8.04178 9.44951 7.8678 9.35158 7.77039 9.20729C7.55839 8.90674 7.45005 8.48898 7.62767 8.14728C7.83342 7.76495 8.25274 7.55242 8.66268 7.46491C9.10804 7.36282 9.61904 7.4196 9.96335 7.74411C10.1227 7.86391 10.2342 8.10509 10.4665 8.07175C10.4702 7.75349 10.2295 7.47585 10.2816 7.1555C10.4139 6.8237 10.7936 6.6716 10.9364 6.34969C10.9457 6.06372 10.8759 5.75795 11.015 5.49178C11.1103 5.28446 11.326 5.17351 11.5401 5.12976C11.5276 5.04277 11.4937 4.95109 11.5291 4.86515C11.612 4.77086 11.7005 4.66877 11.8198 4.62085C11.8985 4.62866 11.9667 4.67294 12.0396 4.70107C12.2063 4.60939 12.3969 4.51771 12.4694 4.32707C12.3235 4.20309 12.0334 4.17965 12.0099 3.9614C12.1167 3.69783 12.4152 3.59261 12.6324 3.43634C12.273 3.12173 11.8953 2.81805 11.476 2.58729C11.2958 2.47061 11.0843 2.58469 10.8942 2.54354C10.6431 2.42998 10.3889 2.24559 10.0977 2.32893C10.0764 2.67115 10.2592 3.00765 10.1665 3.34779C10.1477 3.44364 10.0357 3.47906 9.95189 3.44989C9.72738 3.37852 9.5534 3.21132 9.35494 3.09099C9.15701 2.95608 8.93042 2.86284 8.7455 2.70814C8.69654 2.6748 8.70279 2.58417 8.74602 2.54822C8.93875 2.36487 9.19191 2.26746 9.40964 2.11901C9.37422 1.9617 9.47058 1.83096 9.55288 1.70803C9.29765 1.69292 9.02418 1.74866 8.78717 1.62781C8.50954 1.49446 8.31993 1.19287 7.99386 1.16318C7.82613 1.15224 7.59902 1.10171 7.47817 1.24808C7.51933 1.34965 7.59277 1.43352 7.65372 1.52311C7.18856 1.52519 6.79268 1.24131 6.34992 1.1439C6.08271 1.08244 5.80038 1.15432 5.5738 1.30121C5.21595 1.53249 4.86486 1.77366 4.5091 2.00754C4.26636 2.18516 3.97518 2.33883 3.84027 2.62167C4.20646 2.48363 4.54452 2.23621 4.94769 2.22267C5.10552 2.206 5.19094 2.36175 5.19824 2.49874C5.24095 2.9441 5.13625 3.40196 5.26856 3.83899C5.20657 3.83587 5.1451 3.82962 5.08364 3.82805C5.0378 4.06766 5.00811 4.31456 4.90237 4.53803C4.72735 4.92974 4.53514 5.34072 4.57525 5.78243C4.60338 6.38771 5.04249 6.86589 5.15188 7.45033C5.18834 7.61076 5.13156 7.79828 5.24147 7.93684C5.37065 8.10978 5.46493 8.31344 5.63474 8.452C5.59515 8.04831 5.36284 7.68681 5.3519 7.27895C5.47222 7.43001 5.49254 7.63056 5.58838 7.79516C5.7483 8.07904 5.99207 8.30563 6.15303 8.58952C6.2744 8.78641 6.22231 9.03644 6.32961 9.23907C6.45723 9.4917 6.7083 9.65109 6.96249 9.75579C7.54745 9.9928 8.13971 10.2121 8.72883 10.4392C8.87677 10.4986 9.03772 10.5069 9.18982 10.5486C9.43047 10.696 9.47215 11.0226 9.71071 11.1731C9.93886 11.3205 10.1701 11.4711 10.4264 11.5643C10.566 11.6138 10.6587 11.4565 10.7817 11.4174C10.9385 11.4628 11.0796 11.5544 11.2041 11.6586C11.3244 11.7435 11.277 11.9071 11.2843 12.0326C11.2901 12.2222 11.1473 12.3634 11.0562 12.5155C10.8718 12.8082 10.6863 13.1306 10.7035 13.489C10.7093 13.651 10.6785 13.8276 10.766 13.9745C10.9176 14.2459 11.1697 14.4433 11.3291 14.71C11.4765 14.9553 11.601 15.2283 11.8396 15.4012C12.1011 15.62 12.5069 15.733 12.5829 16.1107C12.7043 16.7722 12.3516 17.3905 12.0756 17.9656C11.7661 18.512 11.6344 19.2251 11.925 19.8048C10.6124 20.0825 9.24035 20.0538 7.92875 19.7829C6.26242 19.4355 4.69193 18.6458 3.41366 17.5223C2.01455 16.3013 0.965997 14.6834 0.428959 12.9056C-0.0888069 11.2002 -0.138812 9.35575 0.284151 7.62483C0.770142 5.60377 1.91714 3.75357 3.49648 2.40394C4.94352 1.15953 6.75518 0.339647 8.64914 0.0927449ZM10.2285 0.436533C10.1306 0.534461 10.0092 0.664162 10.0634 0.8147C10.1566 0.944402 10.3321 0.920962 10.4712 0.943881C10.8322 0.970446 11.1624 1.14755 11.4416 1.36893C11.8037 1.65906 12.1797 1.9393 12.5996 2.14089C12.7168 2.20235 12.8501 2.22006 12.9803 2.19819C13.0085 1.94712 12.8152 1.76012 12.7303 1.54186C12.6496 1.36163 12.6808 1.1439 12.561 0.979822C12.3615 0.701145 12.0292 0.546962 11.6974 0.499561C11.3187 0.445388 10.9556 0.299539 10.5707 0.295371C10.4415 0.289121 10.316 0.342773 10.2285 0.436533ZM9.30911 0.555296C9.21066 0.692291 9.15701 0.858975 9.0471 0.989719C9.35911 1.07827 9.74457 0.994407 9.94668 0.729274C10.0201 0.634992 10.0555 0.421427 9.88938 0.408926C9.68779 0.387569 9.47788 0.444867 9.30911 0.555296ZM9.2018 1.29913C9.23149 1.48248 9.44402 1.50748 9.59403 1.53145C9.81177 1.56687 10.0759 1.56791 10.2295 1.7523C10.2946 1.89659 10.1529 2.02108 10.092 2.13933C10.3457 2.2284 10.6171 2.26642 10.8853 2.25809C11.0916 2.26173 11.1343 1.97472 11.0129 1.85179C10.8489 1.69032 10.6311 1.60281 10.4358 1.48769C10.0738 1.24808 9.61539 1.27986 9.2018 1.29913ZM9.9946 8.88174C10.2894 8.92237 10.5884 8.9656 10.864 9.0854C11.1702 9.20781 11.4369 9.42867 11.7693 9.48337C12.0391 9.53493 12.299 9.41357 12.5402 9.30783C12.5386 9.28959 12.5365 9.25313 12.535 9.2349C12.31 9.08905 12.0605 9.19323 11.8297 9.25469C11.3557 9.07394 10.9411 8.71401 10.4165 8.67286C10.2561 8.66088 9.99356 8.6614 9.9946 8.88174Z" fill="#5590F5"/>
                            </svg>
                            Country Limitations
                            <span class="float-right">
                                            <svg width="32" height="16" viewBox="0 0 32 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M22.4128 0.611497C22.6278 0.231824 23.0595 -0.0188691 23.4973 0.00111366C23.814 0.000508122 24.1144 0.151893 24.3372 0.371098C26.4475 2.47959 28.573 4.57354 30.6784 6.68627C30.8407 6.85521 30.9303 7.07563 31.0036 7.29423V7.72416C30.9291 7.94276 30.8413 8.16439 30.6778 8.33333C28.573 10.4467 26.4469 12.5394 24.3372 14.6485C24.1144 14.8677 23.814 15.0179 23.4973 15.0173C23.0287 15.0403 22.569 14.7508 22.3716 14.3288C22.1591 13.8861 22.2439 13.3151 22.5945 12.9663C23.4313 12.1282 24.273 11.2944 25.1117 10.4588C25.6833 9.87685 26.2852 9.3246 26.8393 8.72633C18.2952 8.71179 9.751 8.72754 1.20684 8.71906C0.624916 8.73359 0.130191 8.27459 0 7.72477V7.29483C0.130191 6.745 0.624311 6.28479 1.20684 6.30054C9.751 6.29267 18.2952 6.3078 26.8393 6.29267C26.6062 6.01957 26.3343 5.78401 26.0866 5.52484C25.007 4.46454 23.9406 3.39092 22.8658 2.32578C22.7447 2.20467 22.6181 2.08841 22.5103 1.95519C22.2088 1.58278 22.1748 1.02387 22.4128 0.611497Z" fill="#5590F5"/>
                                            </svg>
                                        </span>
                        </a>
                    </div>
                </div>
                <div class="col-7 pr-4">
                    <div class="form_inner_div pb-4 border-radius-reg box_shadow_reg mt-0">
                        <div class="head_div">
                            <p class="mb-0 display-4 font-400">Country Limitation</p>
                        </div>
                        <div class="body_div d-flex flex-wrap align-items-end">
                            <div class="select_div w-100 mb-4">
                                <label class="font-400">Send SMS only to the following countries</label>
                                <select class="select_in text-gray font-400 w-100" id="country" @change="selectCountry($event)">
                                    <option value="all">All</option>
                                    <option v-for="(country, cindex) in countries" :value="country.iso">{{country.country}}</option>
                                </select>
                                <div class="mt-3" id="basic" data-input-name="country"></div>
                            </div>

                            <div class="select_div w-100 mb-4">
                                <div class="tag_button_main" aria-live="polite" v-if="data.sms_countries.length > 0" v-for="(zcountry, zcindex) in data.sms_countries" :key="zcindex">
                                    <span v-if="zcountry == 'all'">
                                        <span title="all" class="Polaris-Tag__TagText">All</span>
                                          <button type="button" class="tag_button" @click="removeCountry(0)">
                                          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 121.31 122.876" enable-background="new 0 0 121.31 122.876" xml:space="preserve"><g><path fill-rule="evenodd" clip-rule="evenodd" d="M90.914,5.296c6.927-7.034,18.188-7.065,25.154-0.068 c6.961,6.995,6.991,18.369,0.068,25.397L85.743,61.452l30.425,30.855c6.866,6.978,6.773,18.28-0.208,25.247 c-6.983,6.964-18.21,6.946-25.074-0.031L60.669,86.881L30.395,117.58c-6.927,7.034-18.188,7.065-25.154,0.068 c-6.961-6.995-6.992-18.369-0.068-25.397l30.393-30.827L5.142,30.568c-6.867-6.978-6.773-18.28,0.208-25.247 c6.983-6.963,18.21-6.946,25.074,0.031l30.217,30.643L90.914,5.296L90.914,5.296z" fill="#637381"></path></g></svg>
                                          </button>
                                    </span>
                                    <span v-else>
                                       <span v-for="(country, cindex) in countries" v-if="country.iso == zcountry">
                                          <span :title="zcountry" class="Polaris-Tag__TagText">{{country.country}}</span>
                                          <button type="button" class="tag_button" @click="removeCountry(zcindex)">
                                          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px" viewBox="0 0 121.31 122.876" enable-background="new 0 0 121.31 122.876" xml:space="preserve"><g><path fill-rule="evenodd" clip-rule="evenodd" d="M90.914,5.296c6.927-7.034,18.188-7.065,25.154-0.068 c6.961,6.995,6.991,18.369,0.068,25.397L85.743,61.452l30.425,30.855c6.866,6.978,6.773,18.28-0.208,25.247 c-6.983,6.964-18.21,6.946-25.074-0.031L60.669,86.881L30.395,117.58c-6.927,7.034-18.188,7.065-25.154,0.068 c-6.961-6.995-6.992-18.369-0.068-25.397l30.393-30.827L5.142,30.568c-6.867-6.978-6.773-18.28,0.208-25.247 c6.983-6.963,18.21-6.946,25.074,0.031l30.217,30.643L90.914,5.296L90.914,5.296z" fill="#637381"></path></g></svg>
                                          </button>
                                       </span>
                                    </span>
                                </div>
                            </div>
                            <div class="select_div">
                                <label class="font-400">Max message price</label>
                                <select class="select_in text-gray font-400" v-model="data.is_enable_sms_max_price">
                                    <option value="1">Enabled</option>
                                    <option value="0">Disabled</option>
                                </select>
                            </div>
                            <div class="select_div ml-4">
                                <label class="font-400">Max price</label>
                                <input type="number" class="discount_p mb-0 text-gray font-400" min="0" v-model="data.sms_max_price">
                            </div>
                            <p class="mb-2 ml-4 font-400">Do not send messages if they cost more than. Recommended ${{data.sms_max_price}}.</p>
                        </div>
                        <div class="notice_div">
                            <div class="icon_div">
                                <svg width="11" height="25" viewBox="0 0 11 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.52472 0H8.0524C8.64289 0.0345625 9.23289 0.203968 9.71725 0.551054C10.3116 0.965317 10.7882 1.5816 10.9372 2.30011C11.0881 3.0196 10.9746 3.81016 10.5531 4.42157C10.1169 5.06317 9.44124 5.54705 8.68183 5.72035C7.77931 5.92723 6.77651 5.77292 6.02295 5.21846C5.43977 4.80468 4.98072 4.18937 4.84198 3.47913C4.7417 2.92029 4.77578 2.32348 5.01479 1.80261C5.3244 1.11866 5.90807 0.573933 6.58861 0.266764C6.88507 0.129488 7.20927 0.0749667 7.52472 0Z" fill="#5590F5"/>
                                    <path d="M4.08617 8.5084C4.6932 8.41104 5.31436 8.4125 5.92285 8.49429C6.67155 8.597 7.42024 8.87253 7.97616 9.39924C8.44349 9.82616 8.76526 10.4059 8.87722 11.029C8.9921 11.5504 8.9113 12.0839 8.88306 12.6092C8.83244 13.3598 8.63577 14.0895 8.42645 14.809C8.07644 16.0489 7.72643 17.2888 7.37691 18.5291C7.24451 18.9823 7.13595 19.4419 7.04979 19.9058C6.94123 20.4977 6.83024 21.1106 6.95778 21.7084C7.01717 22.0014 7.16856 22.2979 7.44068 22.4439C7.82623 22.6547 8.27846 22.6839 8.70928 22.6868C9.383 22.6834 10.0319 22.4707 10.6604 22.2477C10.5606 22.7214 10.4437 23.1916 10.3181 23.6595C9.47257 23.99 8.62701 24.322 7.76732 24.615C7.16954 24.8219 6.53573 24.8838 5.90874 24.9242H5.37618C4.52039 24.8726 3.63637 24.6949 2.93295 24.1769C2.22904 23.6721 1.74224 22.8674 1.67069 21.9995C1.60302 21.022 1.78119 20.0484 2.01534 19.1035C2.32397 18.017 2.62919 16.929 2.93733 15.842C3.10235 15.2423 3.28928 14.6484 3.41877 14.0399C3.53317 13.5526 3.66412 13.0658 3.68797 12.5634C3.71328 12.1087 3.71572 11.6205 3.48595 11.2121C3.31362 10.9034 2.95583 10.7725 2.62578 10.717C2.12681 10.6396 1.61081 10.6503 1.12012 10.7715C0.737497 10.8533 0.379701 11.0174 0 11.1079C0.100767 10.6357 0.225387 10.1684 0.344165 9.70057C0.775954 9.52824 1.21066 9.36224 1.64586 9.19722C2.44713 8.92899 3.24255 8.6155 4.08617 8.5084Z" fill="#5590F5"/>
                                </svg>
                            </div>
                            <p class="mb-0 text-white">Current settings: We will never send messages that cost more than $0.060.</p>
                        </div>
                    </div>
                </div>
                <div class="col-2">
                    <div class="right_btn_div d-flex ml-auto justify-content-end align-items-center">
                        <button class="btn_all ml-3" @click="sendData()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import instance from "../../../../axios";

export default {
    name: "SettingIndex",
    data(){
        return{
            isLoading: true,
            data: [],
            countries: {},
            isAll: false,
        }
    },
    methods: {
        async getData(){
            let base = this;
            base.isLoading = true;
            await axios.get('settings')
                .then(res => {
                    base.data = res.data.data.setting;
                    base.countries = res.data.data.countries;

                    if( base.search('all', base.data.sms_countries)){
                        setTimeout(function(){ base.enableDisableCountry(true); }, 5);
                    }
                    base.data.sms_max_price = parseFloat(base.data.sms_max_price).toFixed(2);
                })
                .catch(err => {
                    console.log(err);
                })
                .finally(res => {
                    base.isLoading = false;
                });
        },
        search(nameKey, myArray){
            for (var i=0; i < myArray.length; i++) {
                if (myArray[i] === nameKey) {
                    return true;
                }
            }
            return false;
        },

        async sendData(){
            let base = this;
            base.isLoading = true;
            await axios.post('settings', {data: base.data})
                .then(res => {
                    this.$toast.success(res.data.data);
                })
                .catch(err => {
                    console.log(err);
                })
                .finally(res => {
                    base.isLoading = false;
                });
        },
        selectCountry(e){
            this.enableDisableCountry(false);
            let value = e.target[e.target.selectedIndex].value;
            let sc = e.target[e.target.selectedIndex].innerText;
            this.data.sms_countries = ( sc == 'all' ) ? [] : this.data.sms_countries;
            let c = _.find(this.data.sms_countries, function (o, ic) {
                return o == value;
            });

            if(this.search('all', this.data.sms_countries)){
                this.data.sms_countries = [];
            }

            if(value == 'all'){
                this.isAll = true;
                this.data.sms_countries = [];
                this.data.sms_countries.push('all');
                this.enableDisableCountry(1);
            }else{
                this.isAll = false;
                let key = '';
                _.find(this.countries, function (o, ic) {
                    if( o.country == sc ) {
                        key = o.iso;
                        return;
                    }
                });
                ( typeof c == 'undefined' ) ? this.data.sms_countries.push(key) : '';

                // document.getElementById("country").options[0].disabled = true;
            }

        },
        removeCountry(cindex){
            this.data.sms_countries.splice(cindex, 1);

            if(this.data.sms_countries.length == 0){
                this.enableDisableCountry(0);
            }
            console.log(this.data.sms_countries.length);
        },
        enableDisableCountry(action){
            let zoneE = document.getElementById("country").options;
            for (var j = 1; j < zoneE.length; j++) {
                zoneE[j].disabled = (action == 1) ? true : false;
            }
        }
    },
    mounted(){
        this.getData();
    }
}
</script>

<style scoped>
button.tag_button {
    border: 0;
    background: transparent;
    padding: 0;
    margin-left: 0.4rem;
    cursor: pointer;
}
.tag_button_main{
    display: inline-flex;
    max-width: 100%;
    align-items: center;
    min-height: 28px;
    padding: 0 0.8rem;
    background-color: #dfe3e8;
    border-radius: 3px;
    color: #212b36;
    margin: 0 5;
}
</style>
