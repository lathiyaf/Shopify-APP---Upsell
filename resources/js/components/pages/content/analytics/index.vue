<template>
    <div class="sms-analytics" v-if="!isLoading">
        <date-filter @update="filterData" />
        <div class="revanu_div m-0">
            <div class="row">
                <div class="col-3">
                    <div class="box_div box_shadow_reg border-radius-reg">
                        <div class="head_div green_bg_light">
                            <p class="title_p mb-0 d-flex justify-content-between font-400 display-3 align-items-center">
                                <span>Total Revenue</span>
                                <span class="icon_span">
                                                <svg width="41" height="25" viewBox="0 0 41 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M0.84396 0.36084H37.3995C37.8182 0.624827 38.2542 1.01148 38.2182 1.55678C38.2275 7.87115 38.2142 14.1868 38.2248 20.5012C38.2302 20.8465 38.1782 21.2225 37.9142 21.4745C37.6075 21.8305 37.1036 21.8411 36.6702 21.8545C25.4255 21.8465 14.1793 21.8518 2.93319 21.8518C2.28656 21.8385 1.63192 21.9038 0.990619 21.7958C0.545307 21.7145 0.257321 21.3265 0 20.9892V1.22747C0.227989 0.892814 0.511976 0.595495 0.84396 0.36084ZM5.6304 2.37008C5.57173 3.33936 5.22642 4.32465 4.49179 4.98862C3.83448 5.63125 2.92519 5.93391 2.02257 5.99124C2.01324 9.41507 2.00524 12.8389 2.02657 16.2627C2.76253 16.2934 3.5105 16.4761 4.10914 16.924C5.05842 17.5734 5.59173 18.708 5.61706 19.8452C14.6273 19.8692 23.6375 19.8586 32.6478 19.8506C32.6731 19.0879 32.8864 18.3253 33.3544 17.7133C34.0064 16.7934 35.1183 16.2721 36.2369 16.2627C36.2596 12.8389 36.2529 9.41507 36.2396 5.99124C35.3396 5.92591 34.4237 5.63925 33.7731 4.98862C33.0371 4.32065 32.6851 3.3367 32.6291 2.36208C23.6295 2.36741 14.63 2.35274 5.6304 2.37008Z" fill="black"/>
                                                    <path d="M40.0559 3.67793C40.4039 3.46727 40.7958 3.80459 40.9412 4.11258C41.0065 4.59122 40.9638 5.07786 40.9732 5.56051C40.9745 11.2042 40.9692 16.848 40.9758 22.4917C40.9652 23.0077 41.0398 23.5836 40.7265 24.033C40.4798 24.3969 40.0265 24.5423 39.6039 24.5409C27.8218 24.5449 16.041 24.5383 4.25891 24.5436C3.88026 24.5769 3.36562 24.4009 3.37095 23.9476C3.29229 23.4503 3.83493 23.185 4.25891 23.2397C16.0663 23.245 27.8724 23.237 39.6786 23.2437C39.6639 16.992 39.6786 10.7403 39.6719 4.48856C39.6639 4.17791 39.7106 3.78993 40.0559 3.67793Z" fill="black"/>
                                                    <path d="M17.9166 3.9008C19.3766 3.55948 20.9592 3.87013 22.2058 4.69276C23.623 5.62871 24.6243 7.11264 25.0883 8.73523C25.7536 10.9791 25.4416 13.5097 24.191 15.4949C23.3284 16.8588 21.9778 17.9535 20.3899 18.3214C18.9073 18.6948 17.2953 18.3588 16.0327 17.5175C14.5248 16.5122 13.4942 14.8816 13.0782 13.1324C12.5249 10.9111 12.9129 8.45658 14.1928 6.55134C15.0661 5.26607 16.3807 4.23545 17.9166 3.9008ZM18.6859 6.08203C18.2246 6.28735 18.4113 6.84999 18.342 7.24464C18.0006 7.49129 17.562 7.57396 17.23 7.84194C16.4514 8.41791 16.1847 9.54719 16.5754 10.4232C16.9594 11.1711 17.75 11.5844 18.5139 11.8511C19.0273 12.0457 19.6392 12.1831 19.9499 12.6817C20.0499 13.0137 19.9805 13.443 19.6126 13.5683C18.6739 13.9563 17.6633 13.539 16.766 13.2297C16.5594 13.687 16.43 14.1736 16.3234 14.6629C16.882 15.1069 17.6127 15.1683 18.2926 15.2629C18.3566 15.6349 18.1873 16.1189 18.4793 16.4122C18.9046 16.4962 19.3579 16.5042 19.7819 16.4069C20.1019 16.0935 19.9019 15.5616 19.9645 15.1563C20.6098 14.9216 21.3098 14.643 21.6831 14.027C22.2431 13.179 22.1804 11.9177 21.4045 11.2204C20.6578 10.4671 19.5259 10.3965 18.6779 9.80985C18.2753 9.58319 18.378 8.91922 18.8059 8.77656C19.6272 8.47524 20.4792 8.83789 21.2858 9.01655C21.4818 8.55524 21.6151 8.06593 21.6685 7.56596C21.1458 7.3873 20.6098 7.2313 20.0552 7.20731C20.0485 6.92865 20.0539 6.64867 20.0152 6.37135C19.7672 5.8887 19.1233 6.06469 18.6859 6.08203Z" fill="black"/>
                                                    <path d="M6.72069 10.0323C7.19534 9.88826 7.79131 9.95493 8.09263 10.3936C8.58727 10.9762 8.30062 11.9775 7.57398 12.2108C6.91268 12.4895 6.08072 11.9988 6.01806 11.2842C5.94073 10.7709 6.22205 10.2109 6.72069 10.0323Z" fill="black"/>
                                                    <path d="M30.711 10.0082C31.1297 9.91758 31.6297 9.94958 31.9323 10.2922C32.4309 10.7869 32.3456 11.7255 31.7376 12.0961C31.1523 12.5055 30.2364 12.2148 30.0057 11.5362C29.7484 10.9482 30.1031 10.1989 30.711 10.0082Z" fill="black"/>
                                                </svg>
                                            </span>
                            </p>
                        </div>
                        <div class="prod_numer_div d-flex justify-content-between align-items-center">
                            <div class="price_div display-1 font-400">{{shop.currency_symbol}}{{analytics.all.revenue}}</div>
                            <div class="grap_div text-green font-400">
                                            <span class="icon_svg">
                                                <svg width="11" height="23" viewBox="0 0 11 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0.440361 6.18638C0.166944 6.03158 -0.0135891 5.72066 0.000801248 5.40538C0.000365168 5.17731 0.109383 4.96102 0.26724 4.80055C1.78564 3.28084 3.29357 1.75023 4.81502 0.234016C4.93668 0.117149 5.09541 0.0526121 5.25284 -0.000152817L5.56245 -0.000152831C5.71987 0.0534837 5.87947 0.116714 6.00113 0.234453C7.52302 1.75023 9.03008 3.28128 10.5489 4.80055C10.7068 4.96102 10.8149 5.17731 10.8145 5.40538C10.8311 5.7429 10.6226 6.07387 10.3187 6.21603C9.9999 6.36909 9.58868 6.30804 9.33751 6.05556C8.73399 5.45291 8.13352 4.84677 7.53174 4.24281C7.11268 3.83116 6.71498 3.39771 6.28414 2.9987C6.27368 9.15166 6.28501 15.3046 6.27891 21.4576C6.28938 21.8766 5.95883 22.2329 5.56288 22.3267L5.25327 22.3267C4.85732 22.2329 4.52591 21.8771 4.53724 21.4576C4.53158 15.3046 4.54248 9.15166 4.53157 2.9987C4.33491 3.16659 4.16528 3.36239 3.97864 3.54074C3.21508 4.31825 2.44192 5.08618 1.67488 5.8602C1.58766 5.94741 1.50394 6.03855 1.408 6.11617C1.13982 6.33334 0.737325 6.35776 0.440361 6.18638Z" fill="#32C70D"/>
                                                </svg>
                                            </span>
                                100.00%
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="box_div box_shadow_reg border-radius-reg">
                        <div class="head_div orange_bg_light">
                            <p class="title_p mb-0 d-flex justify-content-between font-400 display-3 align-items-center">
                                <span>Total ROAS</span>
                                <span class="icon_span">
                                                <svg width="32" height="25" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M27.7221 0H28.2777C29.029 0.11 29.7477 0.499375 30.1796 1.13437C30.6121 1.74688 30.774 2.54688 30.5946 3.2775C30.4146 4.055 29.864 4.735 29.1427 5.07438C28.5508 5.35438 27.8521 5.41313 27.2265 5.21375C27.0246 5.1525 26.8402 5.04313 26.6346 4.99438C26.4558 5.13188 26.3102 5.305 26.1496 5.46187C25.0246 6.58687 23.9002 7.7125 22.7746 8.83687C22.6221 8.99375 22.449 9.13375 22.3227 9.31375C22.4477 9.64937 22.6152 9.97562 22.6465 10.3394C22.7552 11.1756 22.4327 12.0519 21.8102 12.6206C21.1977 13.2006 20.2958 13.45 19.4708 13.2781C18.7158 13.1269 18.0402 12.6319 17.669 11.9575C17.3658 11.4319 17.2908 10.81 17.3558 10.2144C16.3396 9.94937 15.3402 9.61687 14.3202 9.37062C14.1377 9.54812 14.0121 9.77688 13.8202 9.94563C13.0702 10.665 11.8815 10.8675 10.9352 10.4406C10.7452 10.3594 10.5796 10.2312 10.3883 10.1544C10.2502 10.2362 10.1302 10.3444 10.0052 10.4438C8.78834 11.425 7.55772 12.3894 6.34147 13.3713C6.55459 13.8194 6.69959 14.3113 6.66209 14.8119C6.62022 15.6906 6.10647 16.5244 5.34772 16.9669C4.68647 17.355 3.85397 17.4419 3.13084 17.1838C2.37959 16.9288 1.75959 16.3181 1.49334 15.5712C1.26897 14.9581 1.28084 14.2619 1.53334 13.6594C1.79522 13.0144 2.32084 12.4819 2.96272 12.2125C3.63084 11.9294 4.41959 11.9281 5.07959 12.2356C5.19334 12.2844 5.30459 12.3456 5.42772 12.3713C5.63584 12.2506 5.80897 12.0806 5.99897 11.9344C7.18647 10.9931 8.36522 10.04 9.55584 9.10312C9.28147 8.39875 9.24834 7.58437 9.57647 6.89187C9.95959 6.04062 10.819 5.4225 11.7515 5.34937C12.5302 5.27125 13.3358 5.55688 13.884 6.11625C14.4027 6.6225 14.669 7.34625 14.6758 8.065C15.6308 8.34937 16.594 8.60688 17.549 8.89188C17.6696 8.925 17.7896 8.96625 17.9158 8.97375C18.1715 8.75125 18.4002 8.48938 18.709 8.33625C19.5208 7.8725 20.5565 7.90875 21.364 8.36375C22.644 7.08125 23.9265 5.80125 25.2071 4.51937C25.3615 4.36062 25.5333 4.2175 25.669 4.04187C25.6565 3.88937 25.564 3.7575 25.5146 3.61562C25.1733 2.77937 25.3258 1.77562 25.874 1.06187C26.3102 0.46875 27.0015 0.108125 27.7221 0ZM27.7758 1.35C27.1696 1.44875 26.6752 2.00625 26.6683 2.62375C26.6365 3.16437 26.9921 3.68125 27.4808 3.89438C27.9608 4.10437 28.5615 3.98938 28.9315 3.61875C29.2815 3.28313 29.4196 2.7475 29.2765 2.28437C29.0977 1.6575 28.4202 1.225 27.7758 1.35ZM11.6471 6.71438C11.124 6.85063 10.7165 7.33375 10.6733 7.87313C10.6027 8.48 11.0183 9.09562 11.6002 9.27125C12.0771 9.42625 12.6333 9.28187 12.9727 8.91187C13.4896 8.38062 13.4365 7.42625 12.8465 6.97C12.5196 6.69687 12.0571 6.59938 11.6471 6.71438ZM19.7752 9.35C19.1677 9.44688 18.6815 10.01 18.6683 10.6244C18.6427 11.1456 18.9633 11.6594 19.4371 11.8744C19.924 12.1106 20.5502 12.0012 20.9315 11.6187C21.2815 11.2831 21.4196 10.7475 21.2765 10.2844C21.0952 9.66 20.4202 9.22375 19.7752 9.35ZM3.77522 13.3506C3.21334 13.4438 2.74084 13.9294 2.67834 14.4987C2.59522 15.0588 2.92334 15.6425 3.43709 15.8744C3.92334 16.1106 4.54959 16.0012 4.93084 15.6187C5.28147 15.2831 5.41959 14.7475 5.27647 14.2844C5.09522 13.66 4.42022 13.2238 3.77522 13.3506Z" fill="black"/>
                                                    <path d="M25.5406 10.8527C25.69 10.6946 25.9175 10.6658 26.1244 10.6658C27.3538 10.6664 28.5831 10.6689 29.8125 10.6646C30.0238 10.6658 30.2594 10.6727 30.4256 10.8233C30.5912 10.9539 30.6694 11.1664 30.6663 11.3739C30.6737 17.8058 30.6544 24.2389 30.6756 30.6714C30.9637 30.6714 31.2587 30.6377 31.5425 30.7052C31.7625 30.7596 31.8825 30.9664 32 31.1414V31.4802C31.9119 31.7227 31.7225 31.9127 31.48 32.0002H0.520625C0.27875 31.9127 0.0875 31.7239 0 31.4814V31.1433C0.11625 30.9671 0.236875 30.7589 0.4575 30.7045C0.74125 30.6377 1.03562 30.6714 1.32438 30.6708C1.34563 28.2389 1.32687 25.8064 1.33375 23.3739C1.3275 23.1508 1.42437 22.9258 1.60812 22.7952C1.79062 22.6558 2.03312 22.6683 2.25 22.6639C3.50063 22.6739 4.75187 22.6583 6.0025 22.6714C6.35125 22.6633 6.66563 22.9671 6.66313 23.317C6.67812 25.7677 6.65188 28.2195 6.67562 30.6708C7.55875 30.6646 8.44125 30.6639 9.32438 30.6708C9.345 29.4889 9.3275 28.307 9.33313 27.1252C9.3325 23.6658 9.335 20.2058 9.3325 16.7464C9.325 16.5214 9.40125 16.2852 9.5875 16.1464C9.75125 16.0039 9.97938 15.9983 10.185 15.9977C11.4375 16.0039 12.69 15.9971 13.9425 16.0008C14.2013 15.9889 14.4644 16.1177 14.5856 16.3527C14.7188 16.6314 14.6537 16.9521 14.6675 17.2502C14.6719 21.7233 14.655 26.1971 14.6756 30.6708C15.5588 30.6646 16.4412 30.6646 17.3244 30.6708C17.3456 26.9052 17.3269 23.1389 17.3337 19.3739C17.3275 19.1502 17.4244 18.9258 17.6081 18.7945C17.7906 18.6558 18.0325 18.6683 18.25 18.6639C19.5006 18.6739 20.7519 18.6583 22.0025 18.6714C22.3506 18.6633 22.6656 18.967 22.6631 19.3164C22.6775 23.1008 22.6525 26.8864 22.6756 30.6708C23.5581 30.6639 24.4412 30.6646 25.3244 30.6708C25.345 27.9683 25.3275 25.2652 25.3331 22.5627C25.3325 18.8533 25.3356 15.1439 25.3319 11.4339C25.3256 11.2227 25.3775 10.9983 25.5406 10.8527ZM26.6706 12.0008C26.6638 18.2152 26.6638 24.4302 26.6706 30.6452C27.5569 30.6552 28.4431 30.6552 29.3294 30.6452C29.3356 24.4302 29.3363 18.2152 29.3288 12.0002C28.4431 12.0002 27.5569 11.9996 26.6706 12.0008ZM10.6769 17.3289C10.6525 19.6358 10.6737 21.9433 10.6663 24.2502C10.6687 26.382 10.6613 28.5139 10.6706 30.6452C11.5569 30.6552 12.4431 30.6552 13.3294 30.6452C13.3319 26.2071 13.345 21.7677 13.3231 17.3295C12.4406 17.3358 11.5588 17.3364 10.6769 17.3289ZM18.6706 20.0002C18.6638 23.5489 18.6638 27.097 18.6706 30.6452C19.5563 30.6552 20.4431 30.6552 21.3294 30.6452C21.3362 27.097 21.3362 23.5489 21.3294 20.0008C20.4431 20.0002 19.5569 20.0002 18.6706 20.0002ZM2.67062 24.0008C2.66438 26.2152 2.66375 28.4302 2.67062 30.6452C3.55687 30.6552 4.44312 30.6552 5.32937 30.6452C5.33625 28.4302 5.33625 26.2152 5.32937 24.0002C4.44312 24.0002 3.55687 23.9995 2.67062 24.0008Z" fill="black"/>
                                                </svg>
                                            </span>
                            </p>
                        </div>
                        <div class="prod_numer_div d-flex justify-content-between align-items-center">
                            <div class="price_div display-1 font-400" v-if="analytics.all.spent">{{((parseFloat(analytics.all.revenue)/parseFloat(analytics.all.spent))*100).toFixed(2)}}%</div>
                            <div class="price_div display-1 font-400" v-else>0%</div>
                            <div class="grap_div text-green font-400">
                                            <span class="icon_svg">
                                                <svg width="11" height="23" viewBox="0 0 11 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0.440361 6.18638C0.166944 6.03158 -0.0135891 5.72066 0.000801248 5.40538C0.000365168 5.17731 0.109383 4.96102 0.26724 4.80055C1.78564 3.28084 3.29357 1.75023 4.81502 0.234016C4.93668 0.117149 5.09541 0.0526121 5.25284 -0.000152817L5.56245 -0.000152831C5.71987 0.0534837 5.87947 0.116714 6.00113 0.234453C7.52302 1.75023 9.03008 3.28128 10.5489 4.80055C10.7068 4.96102 10.8149 5.17731 10.8145 5.40538C10.8311 5.7429 10.6226 6.07387 10.3187 6.21603C9.9999 6.36909 9.58868 6.30804 9.33751 6.05556C8.73399 5.45291 8.13352 4.84677 7.53174 4.24281C7.11268 3.83116 6.71498 3.39771 6.28414 2.9987C6.27368 9.15166 6.28501 15.3046 6.27891 21.4576C6.28938 21.8766 5.95883 22.2329 5.56288 22.3267L5.25327 22.3267C4.85732 22.2329 4.52591 21.8771 4.53724 21.4576C4.53158 15.3046 4.54248 9.15166 4.53157 2.9987C4.33491 3.16659 4.16528 3.36239 3.97864 3.54074C3.21508 4.31825 2.44192 5.08618 1.67488 5.8602C1.58766 5.94741 1.50394 6.03855 1.408 6.11617C1.13982 6.33334 0.737325 6.35776 0.440361 6.18638Z" fill="#32C70D"/>
                                                </svg>
                                            </span>
                                100.00%
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="box_div box_shadow_reg border-radius-reg">
                        <div class="head_div blue_bg_light">
                            <p class="title_p mb-0 d-flex justify-content-between font-400 display-3 align-items-center">
                                <span>Total Orders</span>
                                <span class="icon_span">
                                                <svg width="26" height="25" viewBox="0 0 26 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M5.40932 0H19.8487C20.2984 0.147832 20.7459 0.39082 20.9849 0.817891C22.2797 3.0552 23.5728 5.29307 24.8676 7.53037C25.0478 7.84699 25.2885 8.16475 25.2562 8.55047C25.2602 14.517 25.2562 20.4841 25.2579 26.4512C25.2602 26.7701 25.2624 27.0918 25.2052 27.4073C25.0925 27.9844 24.7022 28.4965 24.1812 28.7672C23.9308 28.9099 23.6419 28.9547 23.361 29H1.8976C1.33119 28.9496 0.778379 28.6873 0.431738 28.2286C0.119082 27.8423 -0.00212887 27.3393 0.00183597 26.8499C-0.000996062 20.8262 0.00183594 14.8025 0.000703131 8.77873C-0.00779296 8.44738 0.0601758 8.1115 0.233496 7.82604C1.58041 5.49018 2.92732 3.15375 4.27424 0.817891C4.511 0.389121 4.96016 0.148965 5.40932 0ZM5.72367 1.70148C4.73813 3.416 3.74861 5.12824 2.76137 6.84162C2.6951 6.95207 2.62826 7.06309 2.58691 7.18543C5.6557 7.19223 8.72393 7.18713 11.7927 7.18826C11.8001 7.05799 11.8046 6.92715 11.8035 6.79688C11.7961 5.09822 11.8131 3.399 11.795 1.70035C9.77121 1.69922 7.74744 1.69695 5.72367 1.70148ZM13.5208 1.70035C13.5095 3.52928 13.5067 5.35934 13.5225 7.18826C16.5834 7.18543 19.6442 7.19449 22.7051 7.18373C21.6476 5.3565 20.5907 3.52984 19.5355 1.70148C17.5304 1.69695 15.5259 1.69922 13.5208 1.70035ZM1.69992 8.89201C1.70049 14.8976 1.69992 20.9027 1.70049 26.9083C1.66707 27.1076 1.81943 27.3195 2.03297 27.2985C9.07793 27.3042 16.1235 27.2991 23.1684 27.3008C23.3672 27.3319 23.5791 27.179 23.5564 26.966C23.5615 20.9417 23.5564 14.9169 23.5587 8.89258C16.2724 8.88635 8.98617 8.88691 1.69992 8.89201Z" fill="black"/>
                                                    <path d="M15.6477 15.0834C16.0017 14.9702 16.4163 15.1322 16.6072 15.4499C16.8213 15.7813 16.7533 16.2553 16.4628 16.5199C15.0179 17.9642 13.5735 19.4091 12.1281 20.8529C11.9389 21.0562 11.6568 21.1695 11.3793 21.131C11.1476 21.1111 10.955 20.965 10.7993 20.8041C10.14 20.1415 9.47275 19.4867 8.81912 18.8195C8.48834 18.4898 8.51439 17.8957 8.87066 17.5949C9.17426 17.3157 9.68515 17.3145 9.98875 17.5949C10.4985 18.0775 10.9726 18.6014 11.4897 19.0732C12.7607 17.8367 13.9983 16.5646 15.2609 15.3191C15.3707 15.2143 15.4987 15.1231 15.6477 15.0834Z" fill="black"/>
                                                </svg>
                                            </span>
                            </p>
                        </div>
                        <div class="prod_numer_div d-flex justify-content-between align-items-center">
                            <div class="price_div display-1 font-400">{{analytics.all.orders}}</div>
                            <div class="grap_div text-green font-400">
                                            <span class="icon_svg">
                                                <svg width="11" height="23" viewBox="0 0 11 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0.440361 6.18638C0.166944 6.03158 -0.0135891 5.72066 0.000801248 5.40538C0.000365168 5.17731 0.109383 4.96102 0.26724 4.80055C1.78564 3.28084 3.29357 1.75023 4.81502 0.234016C4.93668 0.117149 5.09541 0.0526121 5.25284 -0.000152817L5.56245 -0.000152831C5.71987 0.0534837 5.87947 0.116714 6.00113 0.234453C7.52302 1.75023 9.03008 3.28128 10.5489 4.80055C10.7068 4.96102 10.8149 5.17731 10.8145 5.40538C10.8311 5.7429 10.6226 6.07387 10.3187 6.21603C9.9999 6.36909 9.58868 6.30804 9.33751 6.05556C8.73399 5.45291 8.13352 4.84677 7.53174 4.24281C7.11268 3.83116 6.71498 3.39771 6.28414 2.9987C6.27368 9.15166 6.28501 15.3046 6.27891 21.4576C6.28938 21.8766 5.95883 22.2329 5.56288 22.3267L5.25327 22.3267C4.85732 22.2329 4.52591 21.8771 4.53724 21.4576C4.53158 15.3046 4.54248 9.15166 4.53157 2.9987C4.33491 3.16659 4.16528 3.36239 3.97864 3.54074C3.21508 4.31825 2.44192 5.08618 1.67488 5.8602C1.58766 5.94741 1.50394 6.03855 1.408 6.11617C1.13982 6.33334 0.737325 6.35776 0.440361 6.18638Z" fill="#32C70D"/>
                                                </svg>
                                            </span>
                                100.00%
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="box_div box_shadow_reg border-radius-reg">
                        <div class="head_div red_bg_light">
                            <p class="title_p mb-0 d-flex justify-content-between font-400 display-3 align-items-center">
                                <span>Total Spent</span>
                                <span class="icon_span">
                                                <svg width="32" height="25" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M22.0975 0H22.9031C24.9588 0.06 27.0413 0.35625 28.94 1.1825C29.9194 1.62625 30.8869 2.21688 31.4988 3.12625C31.795 3.56188 31.9625 4.07562 32 4.6V27.4C31.9587 28.1375 31.6169 28.8306 31.1125 29.3619C30.3862 30.1306 29.4306 30.6356 28.4556 31.0169C26.745 31.6712 24.9106 31.9225 23.09 32H22.0981C19.8787 31.9225 17.6231 31.5575 15.6256 30.5425C14.5444 31.1644 13.365 31.625 12.1337 31.8356C11.6456 31.9319 11.1481 31.9606 10.6538 32H10.0363C8.97125 31.9456 7.90625 31.7781 6.90188 31.4094C4.63125 30.62 2.66125 29.0006 1.445 26.9275C0.545 25.4331 0.0675 23.7037 0 21.9644V21.4106C0.064375 20.04 0.345625 18.67 0.925625 17.4212C1.62 15.8775 2.70687 14.5162 4.04187 13.4781C5.74563 12.135 7.89188 11.3706 10.0606 11.3237C11.1156 11.2769 12.165 11.4506 13.1838 11.7119C13.1931 9.43188 13.1844 7.15188 13.1875 4.8725C13.1919 4.50625 13.2238 4.13438 13.3488 3.7875C13.5638 3.17125 13.9906 2.65125 14.4844 2.23438C15.2706 1.57562 16.2162 1.13937 17.1812 0.810625C18.7644 0.28125 20.4338 0.06125 22.0975 0ZM21.4037 1.91313C19.7806 2.0275 18.1381 2.32063 16.6675 3.0425C16.0906 3.345 15.4888 3.70625 15.1681 4.295C14.97 4.63938 15.0956 5.06312 15.3394 5.3475C15.7644 5.86312 16.3631 6.19625 16.9613 6.47188C18.3119 7.07 19.785 7.33687 21.2506 7.45125C23.1688 7.57875 25.1225 7.44937 26.975 6.91187C27.8713 6.63812 28.77 6.28813 29.5006 5.68625C29.7981 5.42938 30.105 5.10313 30.12 4.6875C30.1081 4.3025 29.8375 3.99187 29.5669 3.74563C28.9563 3.21438 28.2044 2.88 27.4475 2.61438C25.5106 1.95875 23.4356 1.79813 21.4037 1.91313ZM15.0675 7.5725C15.055 8.4025 15.0675 9.23188 15.0606 10.0619C15.0625 10.2688 15.0513 10.4844 15.13 10.68C15.2369 10.9475 15.4369 11.1644 15.6481 11.355C16.0625 11.7162 16.55 11.9831 17.0531 12.2C18.0275 12.62 19.0681 12.8644 20.115 13.0188C21.4862 13.2081 22.8794 13.2325 24.2575 13.1081C25.5156 12.9831 26.7712 12.7369 27.9469 12.2612C28.5525 12.0125 29.1475 11.7056 29.6313 11.2575C29.8925 11.0125 30.1294 10.6931 30.1238 10.3175C30.125 9.4 30.1287 8.4825 30.1213 7.56437C29.7425 7.76875 29.3819 8.00875 28.9806 8.16813C28.1981 8.53312 27.3631 8.76438 26.525 8.96125C24.5256 9.38438 22.4587 9.47563 20.4281 9.25562C18.5606 9.04 16.6725 8.58813 15.0675 7.5725ZM9.46625 13.2331C8.78 13.3187 8.09562 13.455 7.44688 13.7006C5.67313 14.3413 4.13562 15.6063 3.15062 17.2131C1.80625 19.3594 1.50063 22.1256 2.36875 24.5075C3.1875 26.8525 5.10563 28.7825 7.44562 29.6144C9.76625 30.475 12.46 30.2219 14.5906 28.9675C15.815 28.2594 16.8594 27.2381 17.5906 26.0275C18.7606 24.1262 19.105 21.745 18.5413 19.5869C18.1306 17.96 17.2181 16.4644 15.9625 15.3519C14.2212 13.7744 11.8019 12.995 9.46625 13.2331ZM25.7862 14.7894C23.495 15.1788 21.1337 15.1419 18.8531 14.6994C18.4762 14.6213 18.1094 14.5006 17.7294 14.4388C17.8438 14.5994 17.9806 14.7406 18.1125 14.8862C19.0681 15.9756 19.8013 17.2625 20.2262 18.6494C21.0619 18.7713 21.9069 18.8081 22.7506 18.8094C24.3881 18.7881 26.0394 18.5756 27.5875 18.0244C28.3075 17.7594 29.0225 17.4294 29.5987 16.9125C29.8731 16.6613 30.13 16.3337 30.1238 15.9425C30.125 15.0456 30.1287 14.1487 30.1213 13.2525C28.8062 14.0687 27.3044 14.5319 25.7862 14.7894ZM25.7862 20.4144C24.4744 20.6375 23.1388 20.72 21.8088 20.6694C21.415 20.6656 21.0244 20.6038 20.63 20.6044C20.6437 20.9431 20.665 21.2819 20.6812 21.6206C20.6919 22.3337 20.6169 23.0469 20.4769 23.7456C20.4325 23.9531 20.3694 24.1569 20.3512 24.3687C22.5438 24.6062 24.7956 24.5356 26.9256 23.9263C27.8256 23.6556 28.7275 23.3094 29.4675 22.7144C29.7944 22.4419 30.1281 22.0844 30.1238 21.63C30.125 20.7125 30.1287 19.795 30.1213 18.8775C28.8062 19.6944 27.3044 20.1569 25.7862 20.4144ZM26.7756 25.9C24.5413 26.4231 22.21 26.4931 19.9387 26.1869C19.8431 26.1906 19.7294 26.1356 19.6456 26.1975C19.5306 26.3638 19.4506 26.5513 19.3512 26.7275C18.8656 27.5825 18.2537 28.3631 17.5506 29.0494C17.4775 29.1156 17.4137 29.1919 17.3731 29.2831C18.1481 29.5656 18.9538 29.7438 19.7625 29.8994C22.0081 30.2306 24.3262 30.2131 26.5362 29.6581C27.5588 29.385 28.5894 29.025 29.4325 28.3675C29.7738 28.0894 30.1275 27.725 30.1238 27.2544C30.125 26.3581 30.1281 25.4613 30.1213 24.565C29.0925 25.1988 27.9519 25.6319 26.7756 25.9Z" fill="black"/>
                                                    <path d="M9.39567 15.8218C9.47629 15.3287 10.0025 14.9743 10.4907 15.0818C10.8944 15.1537 11.2244 15.5212 11.2432 15.9324C11.2675 16.3224 11.2294 16.7137 11.2638 17.1031C11.9 17.3174 12.4507 17.7356 12.8907 18.2368C13.1263 18.4718 13.2469 18.8274 13.1513 19.1537C13.0388 19.6293 12.5144 19.9537 12.0388 19.8312C11.5744 19.7312 11.3657 19.2437 10.9663 19.0312C10.6413 18.7993 10.1757 18.7218 9.83067 18.9556C9.42754 19.1906 9.26442 19.7431 9.46692 20.1618C9.61692 20.5199 9.98629 20.7537 10.3719 20.7581C10.9975 20.7787 11.6188 20.9949 12.0975 21.4024C12.8232 21.9887 13.2082 22.9537 13.1032 23.8787C12.9969 24.9231 12.2513 25.8599 11.2607 26.2049C11.2307 26.6149 11.2719 27.0274 11.2369 27.4374C11.19 27.8887 10.7657 28.2581 10.3125 28.2468C9.85942 28.2581 9.43504 27.8887 9.38817 27.4374C9.35129 27.0293 9.39754 26.6181 9.36192 26.2093C8.84067 26.0312 8.36567 25.7243 7.97754 25.3343C7.68567 25.0474 7.62129 24.5612 7.83879 24.2124C8.03629 23.8656 8.46754 23.6737 8.85692 23.7724C9.22317 23.8531 9.44379 24.1912 9.77067 24.3474C10.0838 24.5043 10.49 24.5668 10.7963 24.3593C11.2688 24.0881 11.3975 23.3743 11.0319 22.9649C10.8232 22.6924 10.4694 22.6168 10.1444 22.6062C9.30129 22.5693 8.50879 22.0912 8.03192 21.4037C7.62817 20.8374 7.45442 20.1224 7.52129 19.4331C7.63317 18.3931 8.37567 17.4524 9.36442 17.1074C9.39879 16.6793 9.34504 16.2481 9.39567 15.8218Z" fill="black"/>
                                                </svg>
                                            </span>
                            </p>
                        </div>
                        <div class="prod_numer_div d-flex justify-content-between align-items-center">
                            <div class="price_div display-1 font-400">{{shop.currency_symbol}}{{analytics.all.spent}}</div>
                            <div class="grap_div text-green font-400">
                                            <span class="icon_svg">
                                                <svg width="11" height="23" viewBox="0 0 11 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0.440361 6.18638C0.166944 6.03158 -0.0135891 5.72066 0.000801248 5.40538C0.000365168 5.17731 0.109383 4.96102 0.26724 4.80055C1.78564 3.28084 3.29357 1.75023 4.81502 0.234016C4.93668 0.117149 5.09541 0.0526121 5.25284 -0.000152817L5.56245 -0.000152831C5.71987 0.0534837 5.87947 0.116714 6.00113 0.234453C7.52302 1.75023 9.03008 3.28128 10.5489 4.80055C10.7068 4.96102 10.8149 5.17731 10.8145 5.40538C10.8311 5.7429 10.6226 6.07387 10.3187 6.21603C9.9999 6.36909 9.58868 6.30804 9.33751 6.05556C8.73399 5.45291 8.13352 4.84677 7.53174 4.24281C7.11268 3.83116 6.71498 3.39771 6.28414 2.9987C6.27368 9.15166 6.28501 15.3046 6.27891 21.4576C6.28938 21.8766 5.95883 22.2329 5.56288 22.3267L5.25327 22.3267C4.85732 22.2329 4.52591 21.8771 4.53724 21.4576C4.53158 15.3046 4.54248 9.15166 4.53157 2.9987C4.33491 3.16659 4.16528 3.36239 3.97864 3.54074C3.21508 4.31825 2.44192 5.08618 1.67488 5.8602C1.58766 5.94741 1.50394 6.03855 1.408 6.11617C1.13982 6.33334 0.737325 6.35776 0.440361 6.18638Z" fill="#32C70D"/>
                                                </svg>
                                            </span>
                                100.00%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="graph_div">
            <div class="row">
                <div class="col-7">
                    <div class="table_div">
                        <p class="title_p display-3 font-400">Revenue Sources</p>
                        <div class="table_div_inner box_shadow_reg border-radius-reg  pb-5">
                            <table class="table mb-0 table-borderless">
                                <thead class="thead-blue">
                                <tr>
                                    <th>Source</th>
                                    <th>Sent</th>
                                    <th>Clicks</th>
                                    <th>ROI</th>
                                    <th>Revenue</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="(source, sindex) in analytics" v-if="sindex != 'all' && sindex != 'charts'">
                                    <td class="text-capitalize">{{sindex | format_source}}</td>
                                    <td>{{source.sent}}</td>
                                    <td>{{source.clicks}}</td>
                                    <td>
                                        <span v-if="source.spent > 0">
                                            {{ (( parseFloat(source.revenue) / parseFloat(source.spent)) * 100).toFixed(1) }}</span>
                                        <span v-else>100</span>
                                        %
                                    </td>
                                    <td>{{source.revenue}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
              <!--   <div class="col-5">
                    <div class="table_div">
                        <p class="title_p display-3 font-400">TOP 5 Products Sold <span class="text-gray font-base">(Top 5 products you sold from SMS messaging)</span></p>
                        <div class="table_div_inner box_shadow_reg border-radius-reg  pb-5">
                            <table class="table mb-0 table-borderless">
                                <thead class="thead-blue">
                                <tr>
                                    <th>Title</th>
                                    <th>Title</th>
                                    <th>Revenue</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>Miller’s | Sleak</td>
                                    <td>6</td>
                                    <td>$479.88</td>
                                </tr>
                                <tr>
                                    <td>Miller’s | Sleak</td>
                                    <td>6</td>
                                    <td>$479.88</td>
                                </tr>
                                <tr>
                                    <td>Miller’s | Sleak</td>
                                    <td>6</td>
                                    <td>$479.88</td>
                                </tr>
                                <tr>
                                    <td>Miller’s | Sleak</td>
                                    <td>6</td>
                                    <td>$479.88</td>
                                </tr>
                                <tr>
                                    <td>Miller’s | Sleak</td>
                                    <td>6</td>
                                    <td>$479.88</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>

<!--        subscriper growh and sales graph-->
        <div class="graph_div">
            <div class="row">
                <div class="col-6">
                    <div class="main_inner_div">
                        <p class="title_p display-3 font-400">Subscriber Growth</p>
                        <div class="box_div box_shadow_reg border-radius-reg">
                           <subscribe-growth v-if="!isLoading" :displayData="subscribeGrowthChartData" :keys="filterDates.subscriber"/>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="main_inner_div mb-0">
                        <p class="title_p display-3 font-400">Sales Overtime</p>
                        <div class="box_div box_shadow_reg border-radius-reg">
                           <sales-overtime  v-if="!isLoading" :displayData="salesOvertimeChartData" :keys="filterDates.sales" formatype="int"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import instance from "../../../../axios";
import helper from "../../../../helper";
import SubscribeGrowth from "../charts/SubscribeGrowth";
import SalesOvertime from "../charts/SalesOvertime";
import DateFilter from "../../../Shopify/DateFilter";

export default {
    name: "AnalyticsIndex",
    components:{
        SubscribeGrowth, DateFilter, SalesOvertime
    },
    data(){
        let startDate = new Date();
        let endDate = new Date();
        endDate.setDate(endDate.getDate() + 0)
        return{
            isLoading: true,
            analytics: [],
            shop: [],
            subscribeGrowthChartData: [{
                name: 'Subscriber',
                data: [1,2,3,4,5,6,7,8]
            }],
            filterDates:{},
            salesOvertimeChartData: [{
                name: 'Sales',
                data: [1,2,3,4,5,6,7,8]
            }],
            filter: {
                chartType: 'all',
                dateRange: {startDate, endDate}
            }
        }
    },
    methods:{
        async getData(){
            let base = this;
            let url = 'analytics';
            base.isLoading = true;

            await axios.post(url, {data: this.filter})
                .then(res => {
                    let data = res.data.data;
                    base.analytics = data.analytics;
                    base.salesOvertimeChartData[0].data = data.analytics.charts.sales.value;
                    base.subscribeGrowthChartData[0].data = data.analytics.charts.subscriber.value;
                    base.filterDates['subscriber'] = data.analytics.charts.subscriber.keys;
                    base.filterDates['sales'] = data.analytics.charts.sales.keys;

                    base.shop = data.shop;
                })
                .catch(err => {
                    console.log(err);
                })
                .finally(res => {
                    base.isLoading = false;
                });
        },
        filterData(filterDateRange){
            this.filter.dateRange = filterDateRange;
            this.getData();
        }
    },
    mounted() {
        this.getData();
    },
    filters:{
        format_source(str){
            str =  ( str.includes("campaign")  ) ? str.replace(/\w\S*/g, function(txt){
                return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
            }) : str;
            return str.replace(/_/g, ' ');
        },
    }
}
</script>

<style scoped>

</style>
